<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<dialogueNodes>
	
	<scene id="talk_menu">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_MENU</content>
		<secondsPassed minutes="false"><![CDATA[30]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[0]]></index>
				<responseTitle><![CDATA[Leave]]></responseTitle>
				<responseTooltip><![CDATA[Leave Eisek be, for now.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_leave]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[1]]></index>
				<responseTitle><![CDATA[Buy]]></responseTitle>
				<responseTooltip><![CDATA[See what Eisek has for sale.]]></responseTooltip>
				<nextDialogue/>
				<secondsPassed/>
				<effects/>
				<tradingVariables enabled="true">
					<tradePartner><![CDATA[eisek]]></tradePartner>
				</tradingVariables>
			</response>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[2]]></index>
				<responseTitle><![CDATA[Himself]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek about himself.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_himself]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					[#flags.setFlag(FLAG_dsg_elis_eisek_asked_himself_low, true)]
					#IF(eisek.getAffection(pc) >= 15 && !flags.hasFlag(FLAG_dsg_elis_eisek_asked_himself))
						[#flags.setFlag(FLAG_dsg_elis_eisek_asked_himself, true)]
						[#flags.incrementSavedLong("elis_eisek_talk_score", 1)]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[3]]></index>
				<responseTitle><![CDATA[Business]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek about how his business is doing.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_business]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					#IF(!flags.hasFlag(FLAG_dsg_elis_eisek_asked_business))
						[#flags.setFlag(FLAG_dsg_elis_eisek_asked_business, true)]
						[#flags.incrementSavedLong("elis_eisek_talk_score", 1)]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#eisek.getAffection(pc) > 15]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[4]]></index>
				<responseTitle><![CDATA[Other dragons]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek if he's ever met other dragons]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_other_dragons]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					#IF(!flags.hasFlag(FLAG_dsg_elis_eisek_asked_other_dragons))
						[#flags.setFlag(FLAG_dsg_elis_eisek_asked_other_dragons, true)]
						[#flags.incrementSavedLong("elis_eisek_talk_score", 1)]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#(!pc.hasQuest(QUEST_LINE_EISEK_SIDE_MOB) && !pc.isQuestCompleted(QUEST_LINE_EISEK_SIDE_MOB))]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[5]]></index>
				<responseTitle><![CDATA[Mob]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek about the mob that was around his stall the first time you met him.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_mob]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					#IF(!flags.hasFlag(FLAG_dsg_elis_eisek_asked_about_mob))
						[#flags.setFlag(FLAG_dsg_elis_eisek_asked_about_mob, true)]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#(pc.hasQuest(QUEST_LINE_EISEK_SIDE_MOB) && !pc.isQuestCompleted(QUEST_LINE_EISEK_SIDE_MOB))]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[5]]></index>
				<responseTitle><![CDATA[Mob]]></responseTitle>
				<responseTooltip><![CDATA[Probably best not bring up this topic back up without some results to show.]]></responseTooltip>
				<nextDialogue><![CDATA[null]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#pc.hasQuestInLine(QUEST_LINE_EISEK_SIDE_MOB, QUEST_EISEK_MOB_STAGE_TWO_FAILED)]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[5]]></index>
				<responseTitle><![CDATA[[style.boldBad(Mob)]]]></responseTitle>
				<responseTooltip><![CDATA[Inform Eisek of your failure to handle the mob]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_mob_quest_complete]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					[#game.appendToTextStartStringBuilder(pc.setQuestFailed(QUEST_LINE_EISEK_SIDE_MOB, QUEST_EISEK_MOB_STAGE_TWO_FAILED))]
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#pc.hasQuestInLine(QUEST_EISEK_MOB_STAGE_THREE)]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[5]]></index>
				<responseTitle><![CDATA[[style.boldGood(Mob)]]]></responseTitle>
				<responseTooltip><![CDATA[Tell Eisek that you've handled the mob]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_mob_quest_complete]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					[#game.appendToTextStartStringBuilder(pc.setQuestProgress(QUEST_LINE_EISEK_SIDE_MOB, SIDE_UTIL_COMPLETE))]
					#IF(flags.hasFlag(elis_eisek_mob_quest_persuade))
						[#game.appendToTextStartStringBuilder(pc.addItem(itemGen.generateItem(ITEM_dsg_item_race_dragon_dragonfruit_yellow), 3, false, true))]
						[#game.appendToTextStartStringBuilder(eisek.incrementAffection(pc,15))]
					#ELSE
						[#game.appendToTextStartStringBuilder(pc.incrementMoney(500)]
						[#game.appendToTextStartStringBuilder(eisek.incrementAffection(pc,5))]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[#pc.isQuestCompleted(QUEST_LINE_EISEK_SIDE_MOB)]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[5]]></index>
				<responseTitle><![CDATA[Mob]]></responseTitle>
				<responseTooltip><![CDATA[You've handled the mob. It's all water under the bridge now.]]></responseTooltip>
				<nextDialogue><![CDATA[null]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<availabilityConditional><![CDATA[#pc.isQuestFailed(QUEST_LINE_EISEK_SIDE_MOB)]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[5]]></index>
				<responseTitle><![CDATA[Ask about mob]]></responseTitle>
				<responseTooltip><![CDATA[You probably don't want to dig up reminders of your failure.]]></responseTooltip>
				<nextDialogue><![CDATA[null]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#eisek.getAffection(pc) > 15]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[6]]></index>
				<responseTitle><![CDATA[Why Elis?]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek why he chose to come to Elis]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_why_elis]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					#IF(!flags.hasFlag(FLAG_dsg_elis_eisek_asked_why_elis))
						[#flags.setFlag(FLAG_dsg_elis_eisek_asked_why_elis, true)]
						[#flags.incrementSavedLong("elis_eisek_talk_score", 1)]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[false]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[8]]></index>
				<responseTitle><![CDATA[Stall]]></responseTitle>
				<responseTooltip><![CDATA[See if there's anything you can do to help Eisek about the state of his stall.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_stall_quest_start]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<availabilityConditional><![CDATA[false]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[8]]></index>
				<responseTitle><![CDATA[style.boldGood(Materials)]]></responseTitle>
				<responseTooltip><![CDATA[You've gathered what you need to improve Eisek's stall. Time to show him.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_stall_quest_complete]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#eisek.getAffection(pc) > 15]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[10]]></index>
				<responseTitle><![CDATA[Family]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek about his family.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_family]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					#IF(!flags.hasFlag(FLAG_dsg_elis_eisek_asked_family))
						[#flags.setFlag(FLAG_dsg_elis_eisek_asked_family, true)]
						[#flags.incrementSavedLong("elis_eisek_talk_score", 1)]
					#ENDIF
				]]></effects>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#(flags.hasFlag(FLAG_dsg_elis_eisek_asked_about_mob) && !pc.isQuestCompleted(QUEST_LINE_EISEK_SIDE_MOB))]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[11]]></index>
				<responseTitle><![CDATA[Dragonfall?]]></responseTitle>
				<responseTooltip><![CDATA[Eisek mentioned something about 'the dragons of old' and a 'Dragonfall' when you asked him about the mob. What did he mean by that?]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_dragonfall_vague]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<availabilityConditional><![CDATA[[#pc.isQuestCompleted(QUEST_LINE_EISEK_SIDE_MOB)]]]></availabilityConditional>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[11]]></index>
				<responseTitle><![CDATA[Dragonfall?]]></responseTitle>
				<responseTooltip><![CDATA[You've earned the right to know the truth about the 'dragons of old'.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_dragonfall_specific]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
		</responses>
	</scene>
	
	<scene id="leave">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">LEAVE</content>
		<secondsPassed minutes="false"><![CDATA[10]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>false</travelDisabled>
		<responses copyFromDialogueId="dsg_places_fields_market_produce"/>
	</scene>
	
	<scene id="talk_himself">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_HIMSELF</content>
		<secondsPassed minutes="false"><![CDATA[30]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="talk_business">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_BUSINESS</content>
		<secondsPassed minutes="true"><![CDATA[1]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="talk_family">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_FAMILY</content>
		<secondsPassed minutes="false"><![CDATA[30]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="talk_why_elis">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_WHY_ELIS</content>
		<secondsPassed minutes="false"><![CDATA[30]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="talk_other_dragons">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_OTHER_DRAGONS</content>
		<secondsPassed minutes="false"><![CDATA[30]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="talk_ask_about_mob">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_ASK_ABOUT_MOB</content>
		<secondsPassed minutes="true"><![CDATA[5]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[1]]></index>
				<responseTitle><![CDATA[Focus on mob]]></responseTitle>
				<responseTooltip><![CDATA[Come up with a solution with Eisek's problem.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_mob_quest_start]]></nextDialogue>
				<secondsPassed/>
				<effects><![CDATA[
					[#game.appendToTextStartStringBuilder(pc.startQuest(QUEST_LINE_EISEK_SIDE_MOB))]
				]]></effects>
			</response>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[2]]></index>
				<responseTitle><![CDATA[Dragonfall?]]></responseTitle>
				<responseTooltip><![CDATA[Ask Eisek what he means by 'before the Dragonfall'.]]></responseTooltip>
				<nextDialogue><![CDATA[dsg_characters_eisek_stall_talk_ask_about_dragonfall_vague]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
			<response>
				<responseTabIndex><![CDATA[0]]></responseTabIndex>
				<index><![CDATA[1]]></index>
				<responseTitle><![CDATA[Change the subject]]></responseTitle>
				<responseTooltip><![CDATA[Maybe this is getting too heavy.]]></responseTooltip>
				<nextDialogue stripContent="true"><![CDATA[dsg_characters_eisek_stall_talk_menu]]></nextDialogue>
				<secondsPassed/>
				<effects/>
			</response>
		</responses>
	</scene>
	
	<scene id="talk_ask_about_dragonfall_vague">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_DRAGONFALL_VAGUE</content>
		<secondsPassed minutes="false"><![CDATA[30]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="talk_ask_about_dragonfall_specific">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_DRAGONFALL_SPECIFIC</content>
		<secondsPassed minutes="true"><![CDATA[2]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="mob_quest_start">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">TALK_MOB_QUEST_START</content>
		<secondsPassed minutes="true"><![CDATA[2]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
	<scene id="mob_quest_complete">
		<author><![CDATA[DSG]]></author>
		<title/>
		<tooltip/>
		<preParsingEffects/>
		<content folderPath="txt/dsg/characters/eisek/stall">MOB_QUEST_COMPLETE</content>
		<secondsPassed minutes="true"><![CDATA[5]]></secondsPassed>
		<continuesDialogue>false</continuesDialogue>
		<travelDisabled>true</travelDisabled>
		<responses copyFromDialogueId="dsg_characters_eisek_stall_talk_menu"/>
	</scene>
	
</dialogueNodes>
